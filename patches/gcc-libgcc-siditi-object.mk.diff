--- siditi-object.mk.old	2019-06-02 20:37:30.902720476 -0700
+++ siditi-object.mk	2019-06-02 20:40:12.980048739 -0700
@@ -13,10 +13,20 @@
 
 $o$(objext): %$(objext): $(srcdir)/libgcc2.c
 	$(gcc_compile) -DL$($*-label) -c $< $(vis_hide) \
-		-DLIBGCC2_UNITS_PER_WORD=$($*-size)
+		-DLIBGCC2_UNITS_PER_WORD=$($*-size) && cp $(dep_filename) $(dep_filename).bak && (cat $(dep_filename) \
+			| egrep '^\s*[A-Za-z]:' | sed -e 's/^\s*//g' -e 's/:\s*$$//g' -e 's/\s*\\\s*$$//g' | sort -u | sed -e 's/\\/\\\\/g' | \
+			while IFS= read -r line; \
+			do \
+				sed -ie 's#'"$$line"'#'$$(winepath -u "$$line" | sed -e 's#:#\\\\:#g')'#g' $(dep_filename).bak; \
+			done) && mv $(dep_filename).bak $(dep_filename)
 
 ifeq ($(enable_shared),yes)
 $(o)_s$(objext): %_s$(objext): $(srcdir)/libgcc2.c
 	$(gcc_s_compile) -DL$($*-label) -c $< \
-		-DLIBGCC2_UNITS_PER_WORD=$($*-size)
+		-DLIBGCC2_UNITS_PER_WORD=$($*-size) && cp $(dep_filename) $(dep_filename).bak && (cat $(dep_filename) \
+			| egrep '^\s*[A-Za-z]:' | sed -e 's/^\s*//g' -e 's/:\s*$$//g' -e 's/\s*\\\s*$$//g' | sort -u | sed -e 's/\\/\\\\/g' | \
+			while IFS= read -r line; \
+			do \
+				sed -ie 's#'"$$line"'#'$$(winepath -u "$$line" | sed -e 's#:#\\\\:#g')'#g' $(dep_filename).bak; \
+			done) && mv $(dep_filename).bak $(dep_filename)
 endif
